<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <template id="extend_product_card_styles" inherit_id="theme_prime.snippet_options">
    <xpath expr="//we-select[@data-attribute='style']/we-option[@data-value='s_card_style_8']" position="after">
      <we-option string="Card Style 8 Custom" data-value="s_card_style_8_custom"
                 data-img="/tu_modulo/static/src/img/options/s_card_style_8_custom.svg"/>
    </xpath>
  </template>

  <template id="s_card_style_8_custom" name="Card Style 8 Custom">
    <t t-name="s_card_style_8_custom">
      <div t-attf-class="card h-100 tp-rounded-border border s_card_style_8_custom dr-image-fill-#{widget.imageFill} dr-image-size-#{widget.imageSize}">
        <div class="d_product_box position-relative h-100">
          <!-- Acciones r치pidas -->
          <t t-call="tp_product_snippet_action_drawer"/>

          <!-- Imagen -->
          <div class="overflow-hidden d_img_block position-relative border-bottom d-flex justify-content-center">
            <a t-att-href="item.website_url" t-att-class="hasTimer and 'h-100'">
              <img loading="lazy" t-att-alt="item.name" t-att-src="item.img_medium"
                   class="img img-fluid d-product-img h-100 w-100 position-absolute top-0 start-0 end-0 bottom-0"/>
            </a>
            <t t-call="dr_s_lable_tmpl"/>
          </div>

          <!-- Informaci칩n del producto -->
          <div class="row px-3 g-1 pb-2 pt-3">
            <div class="col-8 text-start">
              <t t-call="tp_category_info"/>
              <h6 class="card-title mb-1 fw-light text-truncate d-product-name">
                <a t-att-href="item.website_url">
                  <t t-out="item.name"/>
                </a>
              </h6>

              <!-- 游댠 Aqu칤 a침adimos los atributos -->
              <ul class="list-unstyled small text-muted text-start text-wrap">
                <t t-foreach="item.attribute_line_ids" t-as="attr">
                  <t t-if="attr.attribute_id.name != 'Marca'">
                    <t t-foreach="attr.value_ids" t-as="val">
                      <li class="d-flex align-items-center mb-1 text-truncate">
                        <t t-if="val.dr_image">
                          <img t-att-src="'/web/image/product.attribute.value/%s/dr_image' % val.id"
                               t-att-alt="val.name"
                               class="attr-icon me-2"/>
                        </t>
                        <span><t t-esc="val.name"/></span>
                      </li>
                    </t>
                  </t>
                </t>
              </ul>

              <!-- Precio -->
              <t t-call="tp-snippet-product-price"/>
              <span t-if="widget._isActionEnabled('rating')" class="w-auto px-0 small mt-n1 d-block">
                <t t-raw="item.rating"/>
              </span>
            </div>

            <!-- Bot칩n de a침adir al carrito -->
            <div class="col-4 d-flex justify-content-end align-items-center">
              <button style="transform:scale(1.1);" 
                      t-if="widget._isActionEnabled('add_to_cart')" 
                      t-att-data-product-product-id="item.product_variant_id"
                      data-bs-toggle="tooltip" data-placement="bottom"
                      class="btn btn-lg tp-rounded-border btn-primary tp-icon-center-2 d_action_btn d_add_to_cart_btn"
                      title="Add to Cart">
                <i style="font-size:16px;" class="d_action_btn_icon dri dri-cart"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </t>
  </template>
</odoo>
