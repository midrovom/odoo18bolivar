<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <template id="s_banner_17_snippet" inherit_id="theme_prime.snippets" name="Banner - 17 Registry">
    <xpath expr="//t[@t-snippet='theme_prime.s_banner_15']" position="after">
      <t t-snippet="theme_prime_image.s_banner_17_template"
         string="Banner - 17"
         group="theme_prime_banner"
         t-thumbnail="/theme_prime_image/static/src/img/snippets/brands_thumb.png"
         data-snippet-option-class="BannerSliderOptions">
        <keywords>banner, brands, carrusel</keywords>
      </t>
    </xpath>
  </template>

  <!-- Template principal -->
  <template id="s_banner_17_template" name="Banner - 17 (Marcas destacadas)">
    <section class="s_banner_17 s_featured_brands o_snippet py-4">
      <div class="container text-center">
        <div class="row mb-3">
          <div class="col">
            <h3 class="fw-bold border-top pt-2 d-inline-block">Marcas destacadas</h3>
          </div>
        </div>

        <!-- Slider en mÃ³vil -->
        <div class="d-md-none">
          <div id="brandsCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
              <t t-set="brand_attr"
                t-value="request.env['product.attribute'].sudo().search([('name','=','Marca')], limit=1)"/>
              <t t-foreach="enumerate(brand_attr.value_ids)" t-as="item">
                <t t-set="idx" t-value="item[0]"/>
                <t t-set="brand" t-value="item[1]"/>
                <div t-attf-class="carousel-item #{'active' if idx == 0 else ''}">
                  <a t-att-href="'/shop?attrib=%s-%s' % (brand.attribute_id.id, brand.id)"
                     class="d-flex justify-content-center align-items-center p-3">
                    <t t-if="brand.image_1920">
                      <img t-att-src="'/web/image/product.attribute.value/%s/image_1920' % brand.id"
                           t-att-alt="brand.name"
                           class="img-fluid" style="max-height:60px; object-fit:contain;"/>
                    </t>
                    <t t-else="">
                      <span class="fw-semibold text-secondary"><t t-esc="brand.name"/></span>
                    </t>
                  </a>
                </div>
              </t>
            </div>
            <!-- Controles -->
            <button class="carousel-control-prev" type="button" data-bs-target="#brandsCarousel" data-bs-slide="prev">
              <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#brandsCarousel" data-bs-slide="next">
              <span class="carousel-control-next-icon"></span>
            </button>
          </div>
        </div>

        <!-- Vista normal en desktop -->
        <div class="row d-none d-md-flex justify-content-center align-items-center g-3">
          <t t-foreach="brand_attr.value_ids" t-as="brand" t-key="brand.id">
            <div class="col-6 col-sm-4 col-md-3 col-lg-2 text-center">
              <a t-att-href="'/shop?attrib=%s-%s' % (brand.attribute_id.id, brand.id)"
                 class="d-flex justify-content-center align-items-center p-2 border rounded h-100">
                <t t-if="brand.image_1920">
                  <img t-att-src="'/web/image/product.attribute.value/%s/image_1920' % brand.id"
                       t-att-alt="brand.name"
                       class="img-fluid" style="max-height:60px; object-fit:contain;"/>
                </t>
                <t t-else="">
                  <span class="fw-semibold text-secondary"><t t-esc="brand.name"/></span>
                </t>
              </a>
            </div>
          </t>
        </div>

      </div>
    </section>
  </template>
</odoo>
