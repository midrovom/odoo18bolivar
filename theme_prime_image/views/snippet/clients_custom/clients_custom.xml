<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <template id="s_clients_brand_snippet" inherit_id="theme_prime.snippets" name="Clients Brand Registry">
    <xpath expr="//t[@t-snippet='theme_prime.s_clients_4']" position="after">
      <t t-snippet="theme_prime_image.s_clients_brands"
         string="Clients - 5 (Marcas destacadas)"
         group="theme_prime_clients"
         t-thumbnail="/theme_prime_image/static/src/img/snippets/brands_thumb.png">
        <keywords>clients, brands, logo, reference</keywords>
      </t>
    </xpath>
  </template>

  <!-- Template principal -->
  <template id="s_clients_brands" name="Clients - Marcas destacadas">
    <section class="s_clients_brands o_snippet py-4">
      <div class="container text-center">

        <!-- Línea superior con título -->
        <div class="row mb-3">
          <div class="col">
            <div class="border-top position-relative d-inline-block px-3">
              <h3 class="fw-bold bg-white px-2 position-relative" style="top:-0.8rem;">
                Marcas destacadas
              </h3>
            </div>
          </div>
        </div>

        <!-- Grid de marcas -->
        <div class="row justify-content-center align-items-center g-3">
          <t t-set="brand_attr"
             t-value="request.env['product.attribute'].sudo().search([('name','=','Marca')], limit=1)"/>
          
          <t t-foreach="brand_attr.value_ids" t-as="brand" t-key="brand.id">
            <div class="col-6 col-sm-4 col-md-3 col-lg-2 text-center">
              <div class="tp-client-box p-3 h-100 d-flex justify-content-center align-items-center">
                
                <!-- Si tiene imagen -->
                <t t-if="brand.dr_image">
                  <img t-att-src="'/web/image/product.attribute.value/%s/dr_image' % brand.id"
                       t-att-alt="brand.name"
                       class="img img-fluid tp-client-image"
                       style="max-height:60px; object-fit:contain;"/>
                </t>
                
                <!-- Si no tiene imagen, mostrar el nombre -->
                <t t-else="">
                  <span class="fw-semibold text-secondary"><t t-esc="brand.name"/></span>
                </t>
                
              </div>
            </div>
          </t>
        </div>

        <!-- Línea inferior -->
        <div class="row mt-3">
          <div class="col">
            <hr class="border-top border-2"/>
          </div>
        </div>

      </div>
    </section>
  </template>
</odoo>
